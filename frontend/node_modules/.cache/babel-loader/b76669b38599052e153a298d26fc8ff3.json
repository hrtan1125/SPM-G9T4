{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { useGridApiMethod } from '@mui/x-data-grid';\nimport { getRowIdFromRowModel } from '@mui/x-data-grid/internals';\n\nfunction createPinnedRowsInternalCache(pinnedRows, getRowId) {\n  var _pinnedRows$top, _pinnedRows$bottom;\n\n  const cache = {\n    topIds: [],\n    bottomIds: [],\n    idLookup: {}\n  };\n  pinnedRows == null ? void 0 : (_pinnedRows$top = pinnedRows.top) == null ? void 0 : _pinnedRows$top.forEach(rowModel => {\n    const id = getRowIdFromRowModel(rowModel, getRowId);\n    cache.topIds.push(id);\n    cache.idLookup[id] = rowModel;\n  });\n  pinnedRows == null ? void 0 : (_pinnedRows$bottom = pinnedRows.bottom) == null ? void 0 : _pinnedRows$bottom.forEach(rowModel => {\n    const id = getRowIdFromRowModel(rowModel, getRowId);\n    cache.bottomIds.push(id);\n    cache.idLookup[id] = rowModel;\n  });\n  return cache;\n}\n\nexport const rowPinningStateInitializer = (state, props, apiRef) => {\n  var _props$experimentalFe, _state$rows;\n\n  if (!((_props$experimentalFe = props.experimentalFeatures) != null && _props$experimentalFe.rowPinning)) {\n    return state;\n  }\n\n  apiRef.current.unstable_caches.pinnedRows = createPinnedRowsInternalCache(props.pinnedRows, props.getRowId);\n  return _extends({}, state, {\n    rows: _extends({}, state.rows, {\n      additionalRowGroups: _extends({}, (_state$rows = state.rows) == null ? void 0 : _state$rows.additionalRowGroups, {\n        pinnedRows: {\n          top: [],\n          bottom: []\n        }\n      })\n    })\n  });\n};\nexport const useGridRowPinning = (apiRef, props) => {\n  var _props$experimentalFe3;\n\n  const setPinnedRows = React.useCallback(newPinnedRows => {\n    var _props$experimentalFe2;\n\n    if (!((_props$experimentalFe2 = props.experimentalFeatures) != null && _props$experimentalFe2.rowPinning)) {\n      return;\n    }\n\n    apiRef.current.unstable_caches.pinnedRows = createPinnedRowsInternalCache(newPinnedRows, props.getRowId);\n    apiRef.current.unstable_requestPipeProcessorsApplication('hydrateRows');\n  }, [apiRef, (_props$experimentalFe3 = props.experimentalFeatures) == null ? void 0 : _props$experimentalFe3.rowPinning, props.getRowId]);\n  useGridApiMethod(apiRef, {\n    unstable_setPinnedRows: setPinnedRows\n  }, 'rowPinningApi');\n  const isFirstRender = React.useRef(true);\n  React.useEffect(() => {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n\n    apiRef.current.unstable_setPinnedRows(props.pinnedRows);\n  }, [apiRef, props.pinnedRows]);\n};","map":null,"metadata":{},"sourceType":"module"}