{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { unstable_composeClasses as composeClasses } from '@mui/material';\nimport { gridRowTreeDepthSelector, gridSortModelSelector, useGridApiContext, useGridSelector, getDataGridUtilityClass, gridEditRowsStateSelector } from '@mui/x-data-grid';\nimport { useGridRootProps } from '../hooks/utils/useGridRootProps';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nconst useUtilityClasses = ownerState => {\n  const {\n    isDraggable,\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['rowReorderCell', isDraggable && 'rowReorderCell--draggable'],\n    placeholder: ['rowReorderCellPlaceholder']\n  };\n  return composeClasses(slots, getDataGridUtilityClass, classes);\n};\n\nconst GridRowReorderCell = params => {\n  var _params$rowNode$posit;\n\n  const apiRef = useGridApiContext();\n  const rootProps = useGridRootProps();\n  const sortModel = useGridSelector(apiRef, gridSortModelSelector);\n  const treeDepth = useGridSelector(apiRef, gridRowTreeDepthSelector);\n  const editRowsState = useGridSelector(apiRef, gridEditRowsStateSelector); // eslint-disable-next-line no-underscore-dangle\n\n  const cellValue = params.row.__reorder__ || params.id; // TODO: remove sortModel and treeDepth checks once row reorder is compatible\n\n  const isDraggable = React.useMemo(() => !!rootProps.rowReordering && !sortModel.length && treeDepth === 1 && Object.keys(editRowsState).length === 0, [rootProps.rowReordering, sortModel, treeDepth, editRowsState]);\n  const ownerState = {\n    isDraggable,\n    classes: rootProps.classes\n  };\n  const classes = useUtilityClasses(ownerState);\n  const publish = React.useCallback((eventName, propHandler) => event => {\n    // Ignore portal\n    // The target is not an element when triggered by a Select inside the cell\n    // See https://github.com/mui/material-ui/issues/10534\n    if (event.target.nodeType === 1 && !event.currentTarget.contains(event.target)) {\n      return;\n    } // The row might have been deleted\n\n\n    if (!apiRef.current.getRow(params.id)) {\n      return;\n    }\n\n    apiRef.current.publishEvent(eventName, apiRef.current.getRowParams(params.id), event);\n\n    if (propHandler) {\n      propHandler(event);\n    }\n  }, [apiRef, params.id]);\n  const draggableEventHandlers = isDraggable ? {\n    onDragStart: publish('rowDragStart'),\n    onDragOver: publish('rowDragOver'),\n    onDragEnd: publish('rowDragEnd')\n  } : null;\n\n  if (((_params$rowNode$posit = params.rowNode.position) != null ? _params$rowNode$posit : 'body') !== 'body') {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsxs(\"div\", _extends({\n    className: classes.root,\n    draggable: isDraggable\n  }, draggableEventHandlers, {\n    children: [/*#__PURE__*/_jsx(rootProps.components.RowReorderIcon, {}), /*#__PURE__*/_jsx(\"div\", {\n      className: classes.placeholder,\n      children: cellValue\n    })]\n  }));\n};\n\nexport { GridRowReorderCell };\nexport const renderRowReorderCell = params => {\n  if (params.rowNode.isPinned) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsx(GridRowReorderCell, _extends({}, params));\n};","map":null,"metadata":{},"sourceType":"module"}